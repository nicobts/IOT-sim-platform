# IOT SIM Management Platform - Production Environment Configuration
# Copy this file to .env.production and fill in the values

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================
ENVIRONMENT=production
DEBUG=false
PROJECT_NAME="IOT SIM Management Platform"
VERSION=1.0.0
HOST=0.0.0.0
PORT=8000
RELOAD=false
LOG_LEVEL=INFO

# ============================================================================
# SECURITY
# ============================================================================
# CRITICAL: Generate a strong secret key (at least 32 characters)
# Example: openssl rand -hex 32
SECRET_KEY=CHANGE_THIS_TO_A_STRONG_SECRET_KEY_MINIMUM_32_CHARACTERS

# Token expiration
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_MINUTES=10080  # 7 days

# ============================================================================
# DATABASE
# ============================================================================
# PostgreSQL/TimescaleDB connection
POSTGRES_USER=iot_user
POSTGRES_PASSWORD=CHANGE_THIS_STRONG_DATABASE_PASSWORD
POSTGRES_DB=iot_sim_platform
POSTGRES_HOST=db
POSTGRES_PORT=5432

# Full database URL
DATABASE_URL=postgresql+asyncpg://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# Connection pool settings
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10

# ============================================================================
# REDIS CACHE
# ============================================================================
REDIS_PASSWORD=CHANGE_THIS_STRONG_REDIS_PASSWORD
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0

# Full Redis URL
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# Cache settings
CACHE_TTL=3600  # 1 hour default TTL

# ============================================================================
# 1NCE API INTEGRATION
# ============================================================================
# Get these from 1NCE Management Portal
ONCE_CLIENT_ID=your_1nce_client_id_here
ONCE_CLIENT_SECRET=your_1nce_client_secret_here
ONCE_API_BASE_URL=https://api.1nce.com
ONCE_AUTH_URL=https://api.1nce.com/oauth/token

# API timeouts (seconds)
ONCE_TIMEOUT=30
ONCE_RETRY_ATTEMPTS=3

# ============================================================================
# CORS SETTINGS
# ============================================================================
# Comma-separated list of allowed origins
# Example: https://yourdomain.com,https://app.yourdomain.com
BACKEND_CORS_ORIGINS=https://yourdomain.com

# ============================================================================
# API SETTINGS
# ============================================================================
API_V1_PREFIX=/api/v1
DOCS_URL=  # Empty to disable docs in production
REDOC_URL=  # Empty to disable redoc in production

# ============================================================================
# FEATURE FLAGS
# ============================================================================
ENABLE_SCHEDULER=true
ENABLE_METRICS=true
ENABLE_CACHING=true

# ============================================================================
# SCHEDULER SETTINGS
# ============================================================================
# Job intervals in minutes
SYNC_SIMS_INTERVAL=15
SYNC_USAGE_INTERVAL=60
CHECK_QUOTAS_INTERVAL=30
CLEANUP_INTERVAL=1440  # 24 hours

# Cleanup retention (days)
USAGE_RETENTION_DAYS=90
EVENT_RETENTION_DAYS=30

# ============================================================================
# MONITORING & OBSERVABILITY
# ============================================================================
# Grafana
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=CHANGE_THIS_GRAFANA_PASSWORD
GRAFANA_ROOT_URL=http://localhost:3000

# Prometheus
PROMETHEUS_RETENTION_DAYS=30

# ============================================================================
# DOCKER SETTINGS
# ============================================================================
DOCKER_USERNAME=your_docker_hub_username

# ============================================================================
# NOTIFICATION SETTINGS (Optional)
# ============================================================================
# Email notifications
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your_email@gmail.com
# SMTP_PASSWORD=your_app_password
# SMTP_FROM=noreply@yourdomain.com

# Slack notifications
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# ============================================================================
# RATE LIMITING
# ============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=100

# ============================================================================
# BACKUP SETTINGS
# ============================================================================
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=  # Optional S3 bucket for backups

# ============================================================================
# PRODUCTION CHECKLIST
# ============================================================================
# Before deploying to production, ensure:
# [ ] SECRET_KEY is set to a strong random value
# [ ] All passwords are changed from defaults
# [ ] CORS origins are correctly configured
# [ ] 1NCE API credentials are valid
# [ ] SSL/TLS certificates are configured
# [ ] Database backups are configured
# [ ] Monitoring alerts are set up
# [ ] Rate limiting is enabled
# [ ] DEBUG is set to false
# [ ] DOCS_URL and REDOC_URL are empty
